<!DOCTYPE html>
<html>
	<head>
		<title>Box Puzzle 3D</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-capable" content="yes">
		<link rel="icon" href="data:;base64,=">
		<link rel="stylesheet" type="text/css" href="style.css">
		<script src="lib/three.min.js" defer></script>
		<script src="lib/OrbitControls.js" defer></script>
		<script type="module" src="src/main.js" defer></script>
		<script type="module" src="src/tests.js" defer></script>
	</head>
	<body id="box_pusher_3d" class="shade generate">
		<div id="puzzle" class="threeScene">
			<h2>Puzzle</h2>
		</div>
		<div id="solution" class="threeScene">
			<h2>Goal</h2>
		</div>
		<div id="controls">
			<h2>Controls</h2>
			<div id="controls_inner">
				<div class="sliders">
					<div class="slider">
						<label for="separation">Separation</label>
						<input type="range" id="separation" min="1" max="3" step="0.05" value="1">
					</div>
					<div class="slider">
						<label for="fade_layers">Fade Layers</label>
						<input type="range" id="fade_layers" min="0" max="4" step="1" value="0">
					</div>
				</div>
				<button type="button" id="undo">Undo</button>
				<button type="button" id="restart">Restart</button>
			</div>
		</div>
		<div id="shade">
			<div id="congrats_mod" class="modal">
				<h2>Congratulations</h2>
				<p>You solved it!</p>
			</div>
			<div id="generate_mod" class="modal">
				<h2>Generate Puzzle</h2>

				<label for="puzzle_name">Name</label>
				<input type="text" id="puzzle_name" required>

				<label>Dimensions</label>
				<input type="text" id="dim1" minlength="1" maxlength="1" size="1" required> x
				<input type="text" id="dim1" minlength="1" maxlength="1" size="1" required> x
				<input type="text" id="dim1" minlength="1" maxlength="1" size="1" required>

				<label for="difficulty">Difficulty</label>
				<input type="text" id="difficulty" minlength="1" maxlength="3" size="3" required>

				<button id="generate">
					Generate
				</button>
			</div>
		</div>
		<script>
			const body = document.getElementById('block_puzzle_3d');
			const puzzle = document.getElementById('puzzle');
			const solution = document.getElementById('solution');
			const controls = document.getElementById('controls');
			const cont_inner = document.getElementById('controls_inner');
			let setControlsSize = function () {
				if (cont_inner.clientWidth > (window.innerWidth/2+1)) {
					body.classList.add('oversize');
					console.log(controls.clientHeight);
					puzzle.style.bottom = controls.clientHeight + 'px';
					solution.style.bottom = controls.clientHeight + 'px';
				}
				else {
					body.classList.remove('oversize');
					puzzle.style.bottom = 0;
					solution.style.bottom = 0;
				}
			}
        	window.addEventListener('resize', setControlsSize, {passive: true});
        	setControlsSize();
		</script>
	</body>
</html>

